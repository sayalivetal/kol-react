"use strict";(self.webpackChunkkol_marketplace_new=self.webpackChunkkol_marketplace_new||[]).push([[74],{4074:function(e,s,a){a.r(s),a.d(s,{default:function(){return j}});var c=a(2791),t=a(6871),n=a(2982),i=a(885),r=a(6431),l=a.n(r),o=a(9434),d=a(8690),m=a(6641),h=a(184),u=function(e){var s=e.id,a=((0,t.s0)(),(0,c.useState)("")),r=(0,i.Z)(a,2),u=r[0],x=r[1],j=(0,o.v9)(m.tz).isSuccess,v=(0,c.useState)(),f=(0,i.Z)(v,2),N=f[0],g=f[1];console.log("check",j);var p=(0,o.I0)(),b=localStorage.getItem("token"),k=(0,c.useState)([]),S=(0,i.Z)(k,2),w=S[0],_=S[1];(0,c.useEffect)((function(){g(s)}),[]),console.log("======================================",u),(0,c.useEffect)((function(){s&&Z(s)}),[s]);var Z=function(e){g(e)};return(0,c.useEffect)((function(){p((0,m.ey)({urlId:N,token:b}))}),[N]),(0,c.useEffect)((function(){if(u){var e=w.filter((function(e,s){return e.name.includes(u)}));_((0,n.Z)(e))}else{(0,d.Ag)((function(e){_((0,n.Z)(e))}),b)}}),[u]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("form",{className:"chat-user-search",children:[(0,h.jsx)("i",{className:"bi bi-search search-icon"}),(0,h.jsx)("input",{className:"form-control user-search-control",type:"text",placeholder:"Search","aria-label":"Search",onChange:function(e){return x(e.target.value)}})]}),(0,h.jsx)("div",{className:"contact-div",children:(0,h.jsx)("div",{className:"contact-table-scroll",children:(0,h.jsx)("div",{className:"chat-users-block",children:w&&w.map((function(e,s){return(0,h.jsxs)("div",{className:"user-item-chat ".concat(e.profile_id==N?"current-active":""),onClick:function(){return Z(e.profile_id)},children:[(0,h.jsxs)("div",{className:"user-item-thumb",children:[(0,h.jsx)("img",{src:e.avatar,className:"profile-image rounded-circle"}),(0,h.jsx)("span",{className:"status-icon in-active"})]}),(0,h.jsxs)("div",{className:"user-item-text",children:[(0,h.jsxs)("div",{className:"user-item-row",children:[(0,h.jsx)("span",{className:"user-item-name",children:e.name}),(0,h.jsx)("span",{className:"user-item-time",children:(0,h.jsx)(l(),{format:"h:mm A",children:e.time})})]}),(0,h.jsx)("div",{className:"user-item-last-msg",children:e.last_msg})]})]},s)}))})})})]})},x=function(e){var s=e.id,a=(0,o.v9)(m.tz),t=localStorage.getItem("token"),r=(0,o.I0)(),d=(0,c.useState)(""),u=(0,i.Z)(d,2),x=u[0],j=u[1],v=(0,c.useState)([]),f=(0,i.Z)(v,2),N=f[0],g=f[1],p=(0,c.useState)(),b=(0,i.Z)(p,2),k=b[0],S=b[1],w=(0,c.useState)(),_=(0,i.Z)(w,2),Z=_[0],y=_[1],C=(0,c.useState)(""),I=(0,i.Z)(C,2),D=I[0],E=I[1];console.log(D);var A=localStorage.getItem("persist:root"),O=JSON.parse(A),F=JSON.parse(O.user);console.log(F);var z=F.username;(0,c.useEffect)((function(){a.chatData.length?g((0,n.Z)(a.chatData)):g([])}),[a]);console.log("==============>",N);var J=function(){S("")};return console.log("jhfdgfhgfdhgfjhg",Z),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"chat-container",children:N.length>0?N.map((function(e,s){return(0,h.jsxs)("div",{className:"chat-row ".concat(k==e.message_id?"delete-edit-div":""),onMouseOut:J,onMouseOver:function(){return function(e,s){S(e),console.log(e,s)}(e.message_id,e.message)},children:[(0,h.jsxs)("div",{className:"chat-thumb-container",children:[(0,h.jsx)("div",{className:"chat-user-thumb",children:(0,h.jsx)("img",{src:e.avatar})}),(0,h.jsx)("span",{className:"status-icon active"})]}),(0,h.jsxs)("div",{className:"chat-info-container",children:[(0,h.jsxs)("div",{className:"chat-user-name",children:[e.name," ",(0,h.jsx)("span",{className:"chat-time",children:(0,h.jsx)(l(),{format:"h:mm A",children:e.sent_at})})]}),Z==e.message_id?(0,h.jsxs)("div",{className:"chat-message-text",children:[(0,h.jsx)("input",{type:"text",defaultValue:e.message,onChange:function(e){return E(e.target.value)}}),(0,h.jsx)("button",{onClick:function(){return function(e){r((0,m.wy)({token:t,editData:D,id:e}))}(e.message_id)},children:"save"}),(0,h.jsx)("button",{onClick:function(){return y(!1)},children:"Cancel"})]}):(0,h.jsx)("div",{className:"chat-message-text",children:e.message})]})]})})):(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"chat-row",children:[(0,h.jsxs)("div",{className:"chat-thumb-container",children:[(0,h.jsx)("div",{className:"chat-user-thumb",children:(0,h.jsx)("img",{src:"s"})}),(0,h.jsx)("span",{className:"status-icon active"})]}),(0,h.jsxs)("div",{className:"chat-info-container",children:[(0,h.jsx)("div",{className:"chat-user-name",children:(0,h.jsx)("span",{className:"chat-time",children:(0,h.jsx)(l(),{format:"h:mm A"})})}),(0,h.jsx)("div",{className:"chat-message-text"})]})]})})}),(0,h.jsx)("div",{className:"chat-input-container",children:(0,h.jsx)("div",{children:(0,h.jsxs)("form",{className:"chat-input-row",onSubmit:function(e){e.preventDefault(),r((0,m.bG)({message:x,id:s,token:t})),e.target.reset();var a={avatar:"http://8ed8-203-145-168-10.in.ngrok.io/uploads/profile/16576921762043.face-sachin.jpg",message:D,name:z,sent_at:new Date};g([].concat((0,n.Z)(N),[a]))},children:[(0,h.jsx)("input",{type:"text",className:"form-control chat-control",placeholder:"Write your message here",onChange:function(e){j(e.target.value)}}),(0,h.jsx)("button",{type:"submit",className:"chat-submit-btn",children:(0,h.jsx)("i",{className:"bi bi-send-fill"})})]})})})]})},j=function(){var e=(0,t.TH)().search,s=new URLSearchParams(e).get("id");return console.log(s),(0,h.jsx)("div",{className:"container",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-lg-4",children:(0,h.jsx)("div",{className:"card",children:(0,h.jsxs)("div",{className:"card-body p-0",children:[(0,h.jsx)("div",{className:"chat-head-bar",children:(0,h.jsxs)("div",{className:"chat-head-row",children:[(0,h.jsx)("div",{className:"chat-head-text",children:(0,h.jsx)("h3",{className:"m-0",children:"Chat"})}),(0,h.jsxs)("div",{className:"chat-head-icons",children:[" ",(0,h.jsx)("i",{className:"span-icon bi bi-telephone"}),(0,h.jsx)("i",{className:"span-icon bi bi-camera-video"})]})]})}),(0,h.jsx)("div",{className:"chat-bar-body",children:(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{children:(0,h.jsx)(u,{id:"".concat(s)})})})})]})})}),(0,h.jsx)("div",{className:"col-lg-8",children:(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("div",{className:"card-body p-0",children:(0,h.jsx)(x,{id:"".concat(s)})})})})]})})}}}]);
//# sourceMappingURL=74.2daf42af.chunk.js.map